<!DOCTYPE html>
<html>
{% load static %}

<head>
  <title>FaceClone</title>

  <!-- <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}"> -->
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="{% static 'css/postlist.css' %}">



</head>

<body>

  <!-- <header> -->
   
    

  <!-- </header> -->


  <br>
{% block content%}
  <!-- main -->
  
    <div class="row">
     
     

      {% for post in postlist reversed %}
      {% if post.user in  list_of_friends %}
    
    
      <div class="container mt-5 mb-5">
        <div class="row d-flex align-items-center justify-content-center">
          <div class="col-md-6">
            <div class="card">
              <div class="d-flex justify-content-between p-2 px-3">
                <a href="{% url 'profile' %}">
                  <div class="d-flex flex-row align-items-center"> <img src="{{profiledetial.profile_pic.url}}" width="50"
                      class="rounded-circle">
                    <div class="d-flex flex-column ml-2"> <span class="font-weight-bold">{{post.user.first_name}}</span>
                      <small class="text-primary">{{post.created}}</small>
                    </div>
                  </div>
                </a>
    
     <!-- Default dropright button -->
     <div class="btn-group dropright">
      <button type="button" class="btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <div class="d-flex flex-row-reverse">
    
          <div class="p-2 px-3">
           
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                 class="bi bi-three-dots-vertical float-right" viewBox="0 0 16 16">
                 <path
                   d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
               </svg></div>
       
       </div>
      </button>
      <div class="dropdown-menu">
        <a href="{% url 'update' post.id  %}" > update</a>
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex flex-row icons d-flex align-items-center"> <i class="fa fa-heart"></i> <i
              class="fa fa-smile-o ml-2"></i> </div>
          <div class="d-flex flex-row muted-color"> <span></span> <span class="ml-2">
              {% if request.user.is_authenticated %}
              <form method="POST" action="{% url 'delete' post.id %}">
                {% csrf_token %}
                <input type="submit" value="Delete ">
              </form>
              {% else %}
              <p>hi</p>
              {% endif %}
            </span> </div>
        </div>
     
      </div>
    </div>
    
                <div class="d-flex flex-row mt-1 ellipsis"> <small class="mr-2">{{post.date}}</small> <i
                    class="fa fa-ellipsis-h"></i> </div>
              </div> <img src="{{post.image.url }}" class="img-fluid">
              <div class="p-2">
                <a class="text-dark" href="{% url 'detailpost' post.id %}">
                  <p class="text-justify">{{post.contain}}</p>
                </a>
                <hr>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex flex-row icons d-flex align-items-center"> <i class="fa fa-heart"></i> <i
                      class="fa fa-smile-o ml-2"></i> </div>
                  <div class="d-flex flex-row muted-color"> <span></span> <span class="ml-2">
                      {% if request.user.is_authenticated %}
                      <form method="POST" action="{% url 'delete' post.id %}">
                        {% csrf_token %}
                        <input type="submit" value="Delete ">
                      </form>
                      {% else %}
                      <p>hi</p>
                      {% endif %}
                    </span> </div>
                </div>
                <hr>
    
                <div class="comments">
                  {% for comment in comment %}
                  {% if comment.post == post %}
    
                  <div class="d-flex flex-row mb-2"> <img src="{{ comment.profile.profile_pic.url }}" width="40" class="rounded-image">
                    <div class="d-flex flex-column ml-2"> <span class="name">{{comment.profile.usr.username }}</span>
                      <small class="comment-text">{{ comment }}</small>
                      <div class="d-flex flex-row align-items-center status"> <small>Like</small> <small>
                        <a  data-toggle="collapse" href="#collapsereply" role="button" aria-expanded="false" aria-controls="collapseExample">
                         Reply 
                        </a>
                      </small>
                        <small><a  data-toggle="collapse" href="#collapsereplies" role="button" aria-expanded="false" aria-controls="collapseExample">
                          see comment replies 
                         </a></small> <small>18 mins</small>
                      </div>
                    </div>
                  </div>
    
    
                  <!-- for rendering replies -->
                  <div class="collapse" id="collapsereplies">
                  {% for reply in comment.replies.all %}
    
                  <div class="d-flex flex-row mb-2"> <img src="{{ comment.profile.profile_pic.url }}" width="40" class="rounded-image">
                    <div class="d-flex flex-column ml-2"> <span class="name">{{reply.profile.usr.username }}</span>
                      <small class="comment-text">{{ reply }}</small>
                      <div class="d-flex flex-row align-items-center status"> <small>Like</small> <small>
                        <a  data-toggle="collapse" href="#collapsereply" role="button" aria-expanded="false" aria-controls="collapseExample">
                         Reply 
                        </a>
                      </small>
                        <small><a  data-toggle="collapse" href="#collapsereplies" role="button" aria-expanded="false" aria-controls="collapseExample">
                          see comment replies 
                         </a></small> <small>18 mins</small>
                      </div>
                    </div>
                  </div>
    
                  {% endfor %}
                </div>
    
                
                <!-- for reply on comment -->
    
                  <div class="collapse" id="collapsereply">
                    <div class="card card-body">
                      <form method="GET" action="{% url 'reply' %}">
                        {% csrf_token %}          
                        <input class="form-control" type="text" placeholder="reply comment" name="comment" required>
                        <input type="hidden"  name="postid" value="{{ post.id}}">                    
                        <input type="hidden"  name="commentid" value="{{comment.id}}">        
                        <button class="btn btn-outline btn-small" type="submit"> Reply</button>
                        </form>
                    </div>
                  </div>
    
                  {% endif %}
                  {% endfor %}
    
    
      
                  <div class="comment-input"> <form method="GET" action="{% url 'comments' %}">
                    {% csrf_token %}     
                    <input class="form-control" type="text" placeholder="reply comment" name="comment" required >
                    <input type="hidden"  name="postid" value="{{ post.id}}">
                    <input type="hidden"  name="commentid" value="">           
                    <button type="submit" class="form-control btn btn-outline-primary"> comment</button>
                    </form>
                    <div class="fonts"> <i class="fa fa-camera"></i> </div>
                  </div>            
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
    
      <!-- ---------------------- -->
    
      {% elif post.user ==  profiledetial.user %}
    
      <div class="container mt-5 mb-5">
        <div class="row d-flex align-items-center justify-content-center">
          <div class="col-md-6">
            <div class="card">
              <div class="d-flex justify-content-between p-2 px-3">
                <a href="{% url 'profile' %}">
                  <div class="d-flex flex-row align-items-center"> <img src="{{profiledetial.profile_pic.url}}" width="50"
                      class="rounded-circle">
                    <div class="d-flex flex-column ml-2"> <span class="font-weight-bold">{{post.user.first_name}}</span>
                      <small class="text-primary">{{post.created}}</small>
                    </div>
                  </div>
                </a>
    
     <!-- Default dropright button -->
     <div class="btn-group dropright">
      <button type="button" class="btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <div class="d-flex flex-row-reverse">
    
          <div class="p-2 px-3">
           
               <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                 class="bi bi-three-dots-vertical float-right" viewBox="0 0 16 16">
                 <path
                   d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" />
               </svg></div>
       
       </div>
      </button>
      <div class="dropdown-menu">
        <a href="{% url 'update' post.id  %}" > update</a>
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex flex-row icons d-flex align-items-center"> <i class="fa fa-heart"></i> <i
              class="fa fa-smile-o ml-2"></i> </div>
          <div class="d-flex flex-row muted-color"> <span></span> <span class="ml-2">
              {% if request.user.is_authenticated %}
              <form method="POST" action="{% url 'delete' post.id %}">
                {% csrf_token %}
                <input type="submit" value="Delete ">
              </form>
              {% else %}
              <p>hi</p>
              {% endif %}
            </span> </div>
        </div>
     
      </div>
    </div>
    
                <div class="d-flex flex-row mt-1 ellipsis"> <small class="mr-2">{{post.date}}</small> <i
                    class="fa fa-ellipsis-h"></i> </div>
              </div> <img src="{{post.image.url }}" class="img-fluid">
              <div class="p-2">
                <a class="text-dark" href="{% url 'detailpost' post.id %}">
                  <p class="text-justify">{{post.contain}}</p>
                </a>
                <hr>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex flex-row icons d-flex align-items-center"> <i class="fa fa-heart"></i> <i
                      class="fa fa-smile-o ml-2"></i> </div>
                  <div class="d-flex flex-row muted-color"> <span></span> <span class="ml-2">
                      {% if request.user.is_authenticated %}
                      <form method="POST" action="{% url 'delete' post.id %}">
                        {% csrf_token %}
                        <input type="submit" value="Delete ">
                      </form>
                      {% else %}
                      <p>hi</p>
                      {% endif %}
                    </span> </div>
                </div>
                <hr>
    
                <div class="comments">
                  {% for comment in comment %}
                  {% if comment.post == post %}
    
                  <div class="d-flex flex-row mb-2"> <img src="{{ comment.profile.profile_pic.url }}" width="40" class="rounded-image">
                    <div class="d-flex flex-column ml-2"> <span class="name">{{comment.profile.usr.username }}</span>
                      <small class="comment-text">{{ comment }}</small>
                      <div class="d-flex flex-row align-items-center status"> <small>Like</small> <small>
                        <a  data-toggle="collapse" href="#collapsereply" role="button" aria-expanded="false" aria-controls="collapseExample">
                         Reply 
                        </a>
                      </small>
                        <small><a  data-toggle="collapse" href="#collapsereplies" role="button" aria-expanded="false" aria-controls="collapseExample">
                          see comment replies 
                         </a></small> <small>18 mins</small>
                      </div>
                    </div>
                  </div>
    
    
                  <!-- for rendering replies -->
                  <div class="collapse" id="collapsereplies">
                  {% for reply in comment.replies.all %}
    
                  <div class="d-flex flex-row mb-2"> <img src="{{ comment.profile.profile_pic.url }}" width="40" class="rounded-image">
                    <div class="d-flex flex-column ml-2"> <span class="name">{{reply.profile.usr.username }}</span>
                      <small class="comment-text">{{ reply }}</small>
                      <div class="d-flex flex-row align-items-center status"> <small>Like</small> <small>
                        <a  data-toggle="collapse" href="#collapsereply" role="button" aria-expanded="false" aria-controls="collapseExample">
                         Reply 
                        </a>
                      </small>
                        <small><a  data-toggle="collapse" href="#collapsereplies" role="button" aria-expanded="false" aria-controls="collapseExample">
                          see comment replies 
                         </a></small> <small>18 mins</small>
                      </div>
                    </div>
                  </div>
    
                  {% endfor %}
                </div>
    
                
                <!-- for reply on comment -->
    
                  <div class="collapse" id="collapsereply">
                    <div class="card card-body">
                      <form method="GET" action="{% url 'reply' %}">
                        {% csrf_token %}          
                        <input class="form-control" type="text" placeholder="reply comment" name="comment" required>
                        <input type="hidden"  name="postid" value="{{ post.id}}">                    
                        <input type="hidden"  name="commentid" value="{{comment.id}}">        
                        <button class="btn btn-outline btn-small" type="submit"> Reply</button>
                        </form>
                    </div>
                  </div>
    
                  {% endif %}
                  {% endfor %}
    
    
      
                  <div class="comment-input"> <form method="GET" action="{% url 'comments' %}">
                    {% csrf_token %}     
                    <input class="form-control" type="text" placeholder="reply comment" name="comment" required >
                    <input type="hidden"  name="postid" value="{{ post.id}}">
                    <input type="hidden"  name="commentid" value="">           
                    <button type="submit" class="form-control btn btn-outline-primary"> comment</button>
                    </form>
                    <div class="fonts"> <i class="fa fa-camera"></i> </div>
                  </div>            
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    
      {%endfor%}
    
  
  {% endblock %}
  <!-- ./main -->
      <!-- ./feed -->

 

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <script type="text/javascript" src="{% static 'js/script.js' %}"></script>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous">
  </script>

</html>